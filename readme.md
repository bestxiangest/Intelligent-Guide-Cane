# 智能导盲杖

## 项目概述

智能导盲杖是一个基于ESP32-S3和FreeRTOS的辅助设备，旨在帮助视障人士更安全、便捷地出行。该项目利用多种传感器和人工智能技术，为视障人士提供环境感知和交互能力。

## 主要功能

1. **超声波避障**：实时检测前方障碍物，并通过振动和声音提醒用户
2. **视觉检测盲道**：使用摄像头识别盲道，防止用户偏离安全路径
3. **红绿灯状态检测**：识别交通信号灯状态及剩余时间，辅助安全过马路
4. **语音交互**：支持语音录制、识别及大模型交互，实现智能问答

## 硬件配置

- 主控：ESP32-S3开发板
- 传感器：
  - 超声波传感器（TRIG引脚：5，ECHO引脚：6）
  - 摄像头模块（ESP32-S3-EYE）
  - 麦克风（引脚：10）
- 反馈设备：
  - 振动马达（引脚：7）
  - 蜂鸣器（引脚：8）
- 其他：
  - 录音触发按钮（引脚：11）

## 软件架构

项目基于FreeRTOS多任务系统，主要包含以下任务：

1. **超声波测距任务**：每100ms检测一次前方障碍物
2. **视觉检测任务**：每500ms进行一次盲道检测
3. **红绿灯检测任务**：每500ms进行一次红绿灯状态检测
4. **语音处理任务**：处理语音录制、识别和AI交互
5. **警报任务**：根据不同优先级的警报触发相应的振动和声音提示

## 目录结构

```
Intelligent Guide Cane/
├── src/                  # 源代码目录
│   ├── main.cpp          # 主程序
│   ├── config.h          # 配置文件
│   ├── vision.h          # 视觉处理模块
│   └── voice.h           # 语音处理模块
├── include/              # 项目头文件目录
├── lib/                  # 项目私有库目录
├── test/                 # 测试文件目录
└── platformio.ini        # PlatformIO配置文件
```

## 开发环境

- 开发平台：PlatformIO
- 框架：Arduino
- 目标板：ESP32-S3-DevKitC-1
- 依赖库：
  - ArduinoJson (7.3.1)
  - base64 (1.4.0)

## 使用方法

1. 使用PlatformIO打开项目
2. 在`config.h`中配置WiFi和API密钥信息
3. 编译并上传代码到ESP32-S3开发板
4. 连接所有传感器和反馈设备
5. 通过串口监视器(115200波特率)查看系统状态

## 自定义配置

在`config.h`文件中可以修改以下配置：

- 硬件引脚定义
- WiFi连接信息
- API密钥（语音识别和AI模型）
- 障碍物检测阈值
- 语音录制参数

## 扩展功能

该项目提供了基础框架，可以进一步扩展以下功能：

1. 添加GPS模块实现定位和导航
2. 集成更多类型的传感器（如温度、湿度等）
3. 优化视觉算法提高识别准确率
4. 添加手机APP远程监控和控制
5. 实现更复杂的语音交互场景

## 注意事项

- 使用前请确保所有传感器正确连接
- 需要稳定的WiFi连接以支持语音识别和AI交互功能
- 首次使用时需要校准超声波传感器
- 视觉识别功能在光线不足的环境下可能受影响
